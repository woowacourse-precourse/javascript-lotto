# 미션 - 로또

<br>

## 👉 이번 미션의 목표

1. 클래스(객체)를 분리하는 연습
2. 도메인 로직에 대한 단위 테스트를 작성하는 연습<br>

<br>

## 📲 기능 목록

<br>

### 1️⃣ 사용자 입력 기능

- [x] 1000원 단위의 구입 금액을 사용자로부터 입력받는다.
  - 입력된 구입 금액이 `⛔ 에러 메시지 기능` - `⚠️ 구입 금액 입력 상황` 에 해당하는지 검사한다.
- [x] 당첨 번호를 입력 받는다. 이때, 번호는 쉼표(,)를 기준으로 구분한다.
  - 입력된 당첨 번호가 `⛔ 에러 메시지 기능` - `⚠️ 당첨 번호 입력 상황` 에 해당하는지 검사한다.
- [x] 1~45 이내의 보너스 번호를 입력 받는다.
  - 입력된 당첨 번호가 `⛔ 에러 메시지 기능` - `⚠️ 보너스 번호 입력 상황` 에 해당하는지 검사한다.<br>
    <br>

### 2️⃣ 결과 출력 기능

- [x] 로또 구입 금액을 입력 받기 위해 `구입 금액을 입력해 주세요.` 을 출력한 뒤 구입 금액을 입력 받는다. 이후 개행한다.
- [x] 구매한 로또의 총 개수를 `N개를 구매했습니다.` 와 같이 출력한다. (로또는 1000원당 1개다.)
- [x] 구매한 로또 개수만큼 `[8, 21, 23, 41, 42, 43]` 의 형태로 출력한다. 이후, 개행한다.
- [x] 출력할 로또 번호의 정렬은 `5️⃣ 로또 번호 정렬 기능` 을 활용한다.
- [x] 당첨 번호를 입력 받기 위해 `당첨 번호를 입력해 주세요.` 를 출력한 뒤 당첨 번호를 입력 받는다. 이후, 개행한다.
- [x] 보너스 번호를 입력 받기 위해 `보너스 번호를 입력해 주세요` 를 출력한 뒤 보너스 번호를 입력 받는다. 이후, 개행한다.
- [x] 당첨 통계를 알려주기 위해 `당첨 통계` 를 출력한다.
- [x] 구분을 위해 `---` 를 출력한다.
- [x] 당첨 통계에 해당하는 정보를 각 라인에 이어서 출력한다. 당첨 통계 구분은 다음과 같다. (1개, 2개 일치는 출력하지 않는다.)
  - `3개 일치 (5,000원) - X개`
  - `4개 일치 (50,000원) - Y개`
  - `5개 일치 (1,500,000원) - Z개`
  - `5개 일치, 보너스 볼 일치 (30,000,000원) - N개`
  - `6개 일치 (2,000,000,000원) - M개`
- [x] 총 수익률을 계산하여 `총 수익률은 xx.x%입니다.` 와 같이 출력한다.<br>
      <br>

### 3️⃣ 금액에 맞는 로또 개수 발행 기능

- [x] 1000원 단위로 입력된 금액에 맞게 로또 개수를 계산한다.<br>
      <br>

### 4️⃣ 랜덤 번호 생성 기능

- [x] 입력된 금액 에 맞는 개수 만큼 로또를 생성한다.
- [x] 각 로또는 총 1~45 이내의 서로 다른 랜덤 번호 6개로 생성된다..<br>
      <br>

### 5️⃣ 로또 번호 정렬 기능

- [x] 생성된 로또 번호를 오름차순으로 정렬한다.<br>
      <br>

### 6️⃣ 일치하는 개수 계산하는 기능

- [x] 입력된 당첨번호와 생성된 로또 번호와의 일치 번호 개수를 계산한다.
- [x] `0개 일치`, `1개 일치`, `2개 일치` 인 로또 번호는 값을 저장하지 않는다.<br>
      <br>

### 7️⃣ 모든 로또의 일치 정보를 계산 하는 기능

- [x] 각 로또들이 몇 개의 일치 값을 가지고 있는지 확인한 뒤, 그 결과를 카운트한다.
- [x] `3개 일치`, `4개 일치`, `5개 일치`, `5개 일치, 보너스 볼 일치`, `6개 일치` 에 대한 개수를 모두 카운트 한다.<br>
      <br>

### 8️⃣ 수익률 계산 기능

- [x] 구매한 로또 금액 대비 당첨 금액 수익률을 계산한다.
- [x] 계산 방법은 `당첨 금액 / 구매한 로또 금액` 이다.
- [x] 당첨 금액은 다음과 같다.
- 6개 일치 (1등) => `2,000,000,000원`
- 5개 일치, 보너스 볼 일치 (2등) => `30,000,000원`
- 5개 일치 (3등) => `1,500,000원`
- 4개 일치 (4등) => `50,000원`
- 3개 일치 (5등)=> `5,000원`

- [x] 수익률은 소수점 둘째 자리에서 반올림한다. (ex. 100.0%, 51.5%, 1,000,000.0%)<br><br>

### 9️⃣ 1000 단위 맞춰주는 기능

- [x] 각 당첨금 출력값의 1000단위 콤마 구분
- [x] 수익률 정수 부분 1000단위 콤마 구분<br>
      <br>

## ⛔ 에러 메시지 기능<br>

- 예외 상황 시 에러 문구를 출력해야 한다. 단, 에러 문구는 "[ERROR]"로 시작해야 한다.<br>
  <br>

### ⚠️ 구입 금액 입력 상황

- [x] 구입 금액이 1000원 단위가 아니라면 `[ERROR] 구입 금액은 1000원 단위로 입력하셔야 합니다.` 라는 에러 메시지를 출력 후 종료한다.
- [x] 공백을 포함한 숫자 이외의 모든 값이 입력으로 들어온다면 모두 예외 상황이다. `[ERROR] 구입 금액은 1000원 단위로 입력하셔야 합니다.` 라는 에러 메시지를 출력 후 종료한다.
- [x] 구입 금액이 음수라면 `[ERROR] 구입 금액은 1000원 단위로 입력하셔야 합니다.` 라는 에러 메시지를 출력 후 종료한다.
- [x] 구입 금액 사이에 공백이 포함되어 있다면 `[ERROR] 구입 금액은 1000원 단위로 입력하셔야 합니다.` 라는 에러 메시지를 출력 후 종료한다.
      <br><br>

### ⚠️ 당첨 번호 입력 상황

- [x] 5개의 `,` 로 구분된 1~45 이내의 6개의 숫자가 입력되어야 한다. 공백을 포함한 이외의 모든 입력들은 `[ERROR] 올바른 당첨 번호를 입력해주세요.` 라는 에러 메시지를 출력 후 종료한다.
- [x] 입력 숫자는 1~45 이내여야 한다. 이외의 숫자 및 문자들이 입력될 시 `[ERROR] 1~45 의 숫자만 입력할 수 있습니다.` 라는 에러 메시지를 출력 후 종료한다.
- [x] 각 숫자, 십의자리 일의자리 사이에 공백이 있으면 안된다.
- [x] 당첨 번호의 길이가 6이 아니라면 `[ERROR] 올바른 당첨 번호를 입력해주세요.` 라는 에러 메시지를 출력 후 종료한다.
- [x] 당첨 번호에 음수나 0이 포함되어있을 경우 `[ERROR] 올바른 당첨 번호를 입력해주세요.` 라는 에러 메시지를 출력 후 종료한다.
- [x] 당첨 번호에 문자가 포함되어있을 경우 `[ERROR] 올바른 당첨 번호를 입력해주세요.` 라는 에러 메시지를 출력 후 종료한다.
- [x] 당첨 번호에 `NaN`, `undefined` 가 포함되어 있을 경우 `[ERROR] 올바른 당첨 번호를 입력해주세요.` 라는 에러 메시지를 출력 후 종료한다.

<br>

### ⚠️ 보너스 번호 입력 상황

- [x] 1~45 이내의 1개의 숫자가 입력되어야한다. 공백을 포함한 이외의 모든 입력들은 `[ERROR] 올바른 보너스 번호를 입력해주세요.` 라는 에러 메시지를 출력 후 종료한다.
- [x] 입력 숫자는 1~45 이내여야 한다. 이외의 숫자 및 문자들이 입력될 시 `[ERROR] 1~45 의 숫자만 입력할 수 있습니다.` 라는 에러 메시지를 출력 후 종료한다.
- [x] 입력된 보너스 번호가 당첨 번호와 중복될 시에 `[ERROR] 보너스 번호는 당첨번호와 중복되면 안됩니다.` 라는 에러 메시지를 출력 후 종료한다.<br>
      <br>

### 🔁 단위 (UNIT 객체 상수)

- `MONETARY` : 1000원 단위
- `MIN_NUMBER` : 로또 번호 최소 숫자
- `MAX_NUMBER` : 로또 번호 최대 숫자
- `MIN_CNT`: 당첨을 위해 맞아야 할 최소 개수,
- `LOTTO_LENGTH` : 로또 번호 길이
- `WIN_NUMBER_CNT` : 로또 번호 개수
- `BONUS_LENGTH` : 보너스 번호 길이
- `DEFAULT` : 기본값 0
- `STORAGE_SPACE` : 로또 저장 배열 기본값
- `ALLOW` : 허용되는 불린 값
- `NOT_ALLOW` : 허락되지 않는 불린 값<br>
  <br>

### 📛 에러 메시지

- ERROR.PURCHASE_AMOUNT : `[ERROR] 구입 금액은 1000원 단위로 입력하셔야 합니다.`
- ERROR.WINNING_NUMBER : `[ERROR] 올바른 당첨 번호를 입력해주세요.`
- ERRPR.NUMBER_RANGE : `[ERROR] 1~45 의 숫자만 입력할 수 있습니다.`
- ERROR.BONUS_NUMBER : `[ERROR] 올바른 보너스 번호를 입력해주세요.`
- WIN_NUMBER_DUPLICATE :`[ERROR] 로또 번호는 서로 다른 6개의 1~45 이내의 숫자여야 합니다.`
- BONUS_NUMBER_DUPLICATE : `[ERROR] 보너스 번호는 당첨번호와 중복되면 안됩니다.`<br>
  <br>

---

<br>

### 🎰 게임 규칙

- 다음은 이번 로또 게임의 기본적인 규칙이다.

```
- 로또 번호의 숫자 범위는 1~45까지이다.
- 1개의 로또를 발행할 때 중복되지 않는 6개의 숫자를 뽑는다.
- 당첨 번호 추첨 시 중복되지 않는 숫자 6개와 보너스 번호 1개를 뽑는다.
- 당첨은 1등부터 5등까지 있다. 당첨 기준과 금액은 아래와 같다.
    - 1등: 6개 번호 일치 / 2,000,000,000원
    - 2등: 5개 번호 + 보너스 번호 일치 / 30,000,000원
    - 3등: 5개 번호 일치 / 1,500,000원
    - 4등: 4개 번호 일치 / 50,000원
    - 5등: 3개 번호 일치 / 5,000원
```

- 로또 구입 금액을 입력하면 구입 금액에 해당하는 만큼 로또를 발행해야 한다.
- 로또 1장의 가격은 1,000원이다.
- 당첨 번호와 보너스 번호를 입력받는다.
- 사용자가 구매한 로또 번호와 당첨 번호를 비교하여 당첨 내역 및 수익률을 출력하고 로또 게임을 종료한다.
- 사용자가 잘못된 값을 입력할 경우 throw문을 사용해 예외를 발생시키고, "[ERROR]"로 시작하는 에러 메시지를 출력 후 종료한다.<br>
  <br>

### 📋 프로그래밍 요구사항

- Node.js 14 버전에서 실행 가능해야 한다. **Node.js 14에서 정상적으로 동작하지 않을 경우 0점 처리한다.**
- 프로그램 실행의 시작점은 `App.js`의 `play` 메서드이다. 아래와 같이 프로그램을 실행시킬 수 있어야 한다.
- `package.json`을 변경할 수 없고 외부 라이브러리(jQuery, Lodash 등)를 사용하지 않는다. 순수 Vanilla JS로만 구현한다.
- [JavaScript 코드 컨벤션](https://github.com/woowacourse/woowacourse-docs/tree/main/styleguide/javascript)을 지키면서 프로그래밍 한다
- 프로그램 종료 시 `process.exit()`를 호출하지 않는다.
- 프로그램 구현이 완료되면 `ApplicationTest`의 모든 테스트가 성공해야 한다. **테스트가 실패할 경우 0점 처리한다.**
- 프로그래밍 요구 사항에서 달리 명시하지 않는 한 파일, 패키지 이름을 수정하거나 이동하지 않는다.
- indent(인덴트, 들여쓰기) depth를 3이 넘지 않도록 구현한다. 2까지만 허용한다.
  - 예를 들어 while문 안에 if문이 있으면 들여쓰기는 2이다.
  - 힌트: indent(인덴트, 들여쓰기) depth를 줄이는 좋은 방법은 함수(또는 메소드)를 분리하면 된다.
- 함수(또는 메서드)가 한 가지 일만 하도록 최대한 작게 만들어라.
- Jest를 이용하여 본인이 정리한 기능 목록이 정상 동작함을 테스트 코드로 확인한다.
- 함수(또는 메서드)의 길이가 15라인을 넘어가지 않도록 구현한다. -함수(또는 메서드)가 한 가지 일만 잘 하도록 구현한다.
- else를 지양한다.
  - 힌트: if 조건절에서 값을 return하는 방식으로 구현하면 else를 사용하지 않아도 된다.
  - 때로는 if/else, switch문을 사용하는 것이 더 깔끔해 보일 수 있다. 어느 경우에 쓰는 것이 적절할지 스스로 고민해 본다.
- 도메인 로직에 단위 테스트를 구현해야 한다. 단, UI(Console.readLine, Console.print) 로직에 대한 단위 테스트는 제외한다.
  - 핵심 로직을 구현하는 코드와 UI를 담당하는 로직을 구분한다.
  - 단위 테스트 작성이 익숙하지 않다면 **tests**/LottoTest.js를 참고하여 학습한 후 테스트를 구현한다.<br>
    <br>

### 📚 라이브러리

- MissionUtils 라이브러리에서 제공하는 Random 및 Console API를 사용하여 구현해야 한다.
  - Random 값 추출은 [MissionUtils 라이브러리](https://github.com/woowacourse-projects/javascript-mission-utils#mission-utils)의 `Random.pickUniqueNumbersInRange()`를 활용한다.
  - 사용자의 값을 입력 받고 출력하기 위해서는 Random 값 추출은 [MissionUtils 라이브러리](https://github.com/woowacourse-projects/javascript-mission-utils#mission-utils)에서 제공하는 `Console.readLine`, `Console.print`를 활용한다.<br>
    <br>

### Lotto 클래스

- 제공된 `Lotto` 클래스를 활용해 구현해야 한다.
- `numbers`의 `#` prefix를 변경할 수 없다.
- `Lotto`에 필드를 추가할 수 없다.<br>
  <br>

### ✔️ 추가 요구사항.

1. 커밋 메시지를 의미 있게 작성한다.
2. git 을 통해 관리할 자원에 대해서도 고려한다.
3. Pull Request를 보내기 전 branch를 확인한다.
4. PR을 한 번 작성했다면 닫지 말고 추가 커밋을 한다.
5. 이름을 통해 의도를 드러내라.
6. 축약하지 않는다.
7. 공백도 코딩 컨벤션이다.
8. 공백 라인을 의미 있게 사용한다.
9. space와 tab을 혼용하지 않는다.
10. 의미 없는 주석을 달지 않는다.
11. linter와 Code Formatter의 기능을 활용한다.
12. EOL (End of Line)
13. 불필요한 console.log 를 남기지 않는다.
14. JavaScript에서 제공하는 API를 적극 활용한다.
15. README.md를 상세히 작성한다.
16. 기능 목록을 재검토한다.
17. 기능 목록을 업데이트한다.
18. 값을 하드 코딩하지 않는다.
19. 구현 순서도 코딩 컨벤션이다.
20. 한 함수가 한 가지 기능만 담당하게 한다.
21. 함수가 한 가지 기능을 하는지 확인하는 기준을 세운다.
22. JavaScript에서 객체를 만드는 다양한 방법을 이해하고 사용한다.
23. 테스트를 작성하는 이유에 대해 본인의 경험을 토대로 정리해본다.
24. 처음부터 큰 단위의 테스트를 만들지 않는다.
