# 3주차 미션 - 로또(Lotto)

<br>

## [작성자] : 김동우(DongWooKim97)

<br>

## 📝 구현할 기능 목록

<br>

- [x] **1. 로또 진행을 주관하는 기능(클래스)**

  - 로또 구매자와 로또 매장 점원의 가상 상황을 연출하여, `clerk` 이라는 클래스 생성
  - `clerk`클래스를 통해, 구매자로부터 구매수량, 당첨번호, 보너스 번호를 관리
  - `private fields`엔 구매수량, 구입한 랜덤 로또 번호, 당첨번호, 보너스번호, 지불금액을 저장하여 내부에서 관리

  - [x] 로또 구매 금액 입력받기

    - [x] private fields `this.#payment`를 `PurChase`클래스의 인스턴스로 생성
    - [x] 입력받은 금액은 `PurChase`클래스를 통해 Validate 진행
    - [x] private fields `this.#quickPick`는 `QuickPick`클래스의 인스턴스로 생성
    - [x] `#quickPick`에는 입력받은 금액만큼 생성한 로또 번호의 정보 저장.

  - [x] 로또 당첨 번호 입력받기

    - [x] `this.#lotto`를 `Lotto`클래스의 인스턴스로 생성
    - [x] 인스턴스로 생성 후 이에 대한 validate성공한 값 저장.

  - [x] 보너스 번호 입력받기

    - [x] `this.#bonus`를 `Bonus`클래스의 인스턴스로 생성
    - [x] 인스턴스로 생성 후 이에 대한 validate성공한 값 저장.

    [x] 결과출력하기

    - [x] `this.#result`를 `Result`클래스의 인스턴스로 생성
    - [x] 생성자로 앞서 만든 private fields를 제공.
    - [x] 인스턴스를 통해 메소드를 통해 당첨 결과 및 총 수익률 출력 후 게임 종료.

<br>

- [x] **2. 구입금액을 입력받아 수량을 체크하는 기능(클래스)**

  - `PurChase`클래스는 로또 구매자로부터 입력받은 금액에 대한 예외처리 및 에러 파악을 하는 클래스
  - 세 가지의 예외처리 메소드를 통과하면 private fields에 저장하고, 리턴하는 메소드 생성.

  - [x] 매개변수로 전달된 문자열 그대로의 payment를 validate실행
  - [x] validate 목록
    - [x] 1\_로또 금액보다 적을 경우,
    - [x] 2\_숫자로만 이루어지지 않을 경우,
    - [x] 3\_로또 금액인 1000원으로 나누어 떨어지지 않는 경우,

<br>

- [x] **3. 나의 로또 번호를 랜덤으로 생성하는 기능(클래스)**

  - 로또 구매자로부터 입력받은 구매수량만큼의 로또 번호(배열)을 생성하는 기능.
  - `QuickPick`클래스를 생성하여 구매수량, 로또 번호, 각 번호(배열) 출력을 관리

  - [x] 매개변수로 전달된 amount를 `this.#amount`에 저장
  - [x] 생성자로 부터 `this.myLottoArray`를 전역메소드의 결과값을 저장
    - [x] 전역메소드 `pickRandomNumbers`는 주어진 수량만큼 `Random`을 이용해 배열을 생성
  - [x] 금액만큼 만들어진 숫자 배열 출력하는 메소드 작성
  - [x] private fields에 저장된 값 return하는 get메소드 작성.

<br>

- [x] **4. 로또 진행을 위한 상수값 관리 기능**

  - 로또 진행을 하기위해서는 고정된 값들이 존재
    - ex. 1등 당첨 금액 = 20,000,000,000 / 로또 번호의 범위 = 1 ~ 45
  - 이러한 고정된 값들을 클래스에 생성하여 모듈화시켜 재사용성을 증대시키위해 작성.
  - `Constants` 클래스에서, 필요한 각 상수를 객체로 생성.

    - `{LOTTO_INFO, GAME_MESSAGES, ERROR_MESSAGE, NUMBERS, RESULT_MESSAGES}`

  - [x] 가장 먼저 로또 게임에 대한 정보를 담고있는 객체 `LOTTO_INFO`생성

    - [x] 로또 가격, 로또 번호의 길이, 1등 ~ 5등 상품 금액

  - [x] 게임 진행에 필요한 문자열을 담고있는 객체 `GAME_MESSAGES`생성

    - [x] 구입 금액, 당첨 번호, 보너스 번호를 입력받을 때 출력하는 문자열 생성
    - [x] 구매한 수량 출력

  - [x] 입/출력 관련한 에러, 예외처리 시 사용될 문자열을 담고있는 객체 `ERROR_MESSAGES` 생성

    - [x] validate가 진행되는 3가지 경우에 따라서 생성

      - [x] 1. `Purchase`클래스에서 구매금액 입력 받을 때

        - [x] 최소 구매 금액, 숫자 입력 타입, 구매 금액 단위

      - [x] 2. `Lotto`클래스에서 당첨 번호를 입력 받을 때

        - [x] 각 로또 번호의 범위, 로또 번호 타입, 로또 번호 길이, 배열 내 중복 번호

      - [x] 3. `Bonus`클래스에서 보너스 번호를 입력 받을 때

        - [x] 보너스 번호와 당첨 번호의 중복, 보너스 번호 타입, 보너스 번호 범위

    - [x] 랜덤 배열을 생성 시 필요한 최소 번호, 최대 번호, 알맞은 길이을 담고있는 객체 `NUMBERS` 생성
    - [x] 결과를 산정하고, 출력하는 문자열을 담고있는 객체 `RESULT_MESSAGES` 생성
      - [x] 당첨 통계, 1 ~ 5등 상품에 대한 각각의 결과 문자열, 총 수익률

<br>

- [x] **5. 당첨 로또 번호 입력 기능**

  - 로또는 당첨 번호와 일치성에 따라 당첨 금액을 차등 지급.
  - 따라서, 점원(clerk)이 구매자로 부터 당첨번호를 입력 받아 `Lotto`클래스에서 관리.

  - 입력받을 숫자는 6개로, 문자열로 입력받은 다음 숫자배열로 만들어 저장.

    - 숫자배열로 만들면 정렬하기도 편하고, 값의 비교 혹은 당첨 여부를 파악하기 수월.

  - [x] 입력받은 문자열`("1,2,3,4,5,6")`을 숫자 배열화`[1,2,3,4,5,6]`;
  - [x] 매개변수로 넘겨 생성자에서 바로 validate 진행

    - [x] 중복 검사
    - [x] 로또 적합 길이인 6과의 일치 검사
    - [x] 배열 아이템들의 데이터 타입 검사 -> 숫자만 가능!
    - [x] 로또 최소 숫자인 1과 최대 숫자인 45 사이의 숫자 검사

  - [x] 이후에 private fields에 해당 배열을 저장 후 메소드로 return하게끔 유도

<br>

- [x] **6. 당첨 보너스 번호 입력 기능**

  - 로또는 일정한 당첨 번호와 일치(5개)했을 떄, 보너스 번호를 통해 당첨 금액을 올릴 가능성이 있다.
  - 또한 보너스 번호는 당첨 번호와 개별적인 숫자로, 이와 중복되어선 안된다.

  - 따라서, `Bonus`클래스를 생성하여 입력값의 에러를 판별하고, 보너스 번호를 관리한다.

  - [x] 입력받은 `bonusNumber`를 validate

    - [x] 숫자 타입인지 검사
    - [x] 보너스 번호가 로또 최소 번호인 1과 최대 숫자인 45 사이의 숫자인지 검사
    - [x] 매개변수로 받은 당첨 번호와의 중복값 존재 검사

  - [x] 이후에 private fields에 해당 값을 저장 후 메소드로 return 하게 끔 유도

<br>

- [x] **7. 입력값에 따른 당첨 결과 확인 기능**

  - 지불한 금액 만큼의 수량을 가지고, 입력한 당첨 번호와 보너스 번호를 통해서 결과를 출력하는 기능.
  - 각 순위에 해당하는 당첨 결과 개수와 총 수익률에 대한 정보를 제공.

    - `Result`클래스에서 이를 주관.

  - [x] 생성자에 당첨번호, 나의 로또 배열, 보너스 번호, 구입금액을 전달.
  - [x] private fields에 `#profit`, `#scoreBoard`, `totalProfitRate` 생성

  - [x] 가장 먼저 각 순위에 대한 점수 카운트 시작.

    - [x] 전달받은 나의 로또 배열들을 순회하면서 당첨번호와의 비교
    - [x] 로또 하나의 배열의 번호들과 당첨 번호를 비교 후, 똑같은 번호가 3개 이상인 것만 추려 `#scoreBoard`에 값을 추가
      - [x] 같은 번호가 5개일 경우는 보너스 번호의 포함여부를 통해 2,3등을 가려냄.
    - [x] `#scoreBoard`에는 같은 번호가 3개, 4개, 5개, 5개+보너스번호, 6개일 경우만 존재하고 이를 객체로 저장

  - [x] 이후에 객체에 저장된 값으로 출력.

    - `Constants`클래스에 저장된 객체에 해당 당첨 상품에 대한 카운트를 전달하여 출력

  - [x] 이 객체의 저장된 값으로 이익을 판별

    - [x] 객체의 저장된 각 배열 별 카운트 합 \* 해당 당첨 금액을 곱해 이익을 산출
    - [x] 해당 이익의 값은 `#profit`에 저장

  - [x] 총 수익률을 구하기

    - [x] 두 가지 경우 존재.
      - [x] 1\_ 이익이 존재할 경우 -> `#profit`을 전달받은 `this.payment`로 나누고 100을 곱하여 산출.
      - [x] 2\_ 이익이 존재하지 않을 경우 -> 0.0%로 고정

  - [x] 총 수익률 출력하기

<br>

- [x] **8. 작성한 기능 및 코드에 대한 테스트 코드**

  - 작성한 모듈 및 클래스별로 테스트 코드를 작성.
  - 작성 코드는 두 가지 범주에서 진행

    - 1\_ 도메인 로직 단위
    - 2\_ 기능 로직 단위

  - 전체 흐름에 대한 전체 결과값을 도메인 로직 단위에서 테스트 진행
  - 개별적 단위의 결과값을 기능 로직 단위에서 테스트 진행

  - [x] `ApplicationTest.js`

    - : 도메인 로직 단위의 테스트로, 제공된 입/출력을 통해 전체적인 흐름을 테스트.
    - : 정상 작동함을 파악하기 위해 나만의 입력을 제공하여 결과값이 맞는지 테스트

  - [x] `PurChaseTest.js`

    - : 구매자로부터 구입금액을 입력받는 클래스의 테스트로서, 입력받은 값에 대한 예외처리 테스트를 진행
    - : 내가 클래스에 작성한 예외처리 메소드가 잘 작동하는지 확인하고, 에러가 없을 시 적상 작동하는 것 까지 테스트
      - [x] 1\_ 구입금액 1000원이 넘지 않는 경우 테스트
      - [x] 2\_ 구입 금액이 숫자가 아닌 경우 테스트
      - [x] 3\_ 구입 금액이 로또 금액인 1000원으로 나누어 떨어지지 않는 경우 테스트
      - [x] 4\_ 정상 작동 테스트

  - [x] `LottoTest.js`

    - : 구매자로부터 당첨번호를 입력받는 클래스의 테스트로서, 입력받은 값에 대한 예외처리 테스트를 진행
    - : 내가 클래스에 작성한 예외처리 메소드가 잘 작동하는지 확인하고, 에러가 없을 시 적상 작동하는 것 까지 테스트
      - [x] 1\_ 로또의 번호가 6개가 아닌 경우 테스트
      - [x] 2\_ 로또 번호에 중복된 숫자가 있는 경우 테스트
      - [x] 3\_ 로또 번호가 숫자로만 이루어지지 않은 경우 테스트
      - [x] 4\_ 로또의 각 자리의 번호가 1 ~ 45가 아닌 경우 테스트
      - [x] 5\_ 정상 작동 테스트

  - [x] `BonusTest.js`

    - : 구매자로부터 보너스번호를 입력받는 클래스의 테스트로서, 입력받은 값에 대한 예외처리 테스트
    - : 내가 클래스에 작성한 예외처리 메소드가 잘 작동하는지 확인하고, 에러가 없을 시 적상 작동하는 것 까지 테스트
      - [x] 1\_ 보너스 번호가 숫자가 아닐 경우 테스트
      - [x] 2\_ 보너스 번호가 1 ~ 45가 아닐 경우 테스트
      - [x] 3\_ 보너스 번호가 당첨 번호와 중복된 경우 테스트
      - [x] 4\_ 정상 작동 테스트
